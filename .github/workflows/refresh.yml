# Simple workflow for deploying static content to GitHub Pages
name: Refresh

on:
  # Runs on pushes targeting the default branch
  push:
    branches: ["master"]
  schedule:
    - cron:  '0,5,10,15,20,25,30,35,40,45,50,55,60 7,8,9,10,11,12,13,14,15,16,17,18,19,20,21 * * *' # Runs every day at 3am

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow one concurrent deployment
concurrency:
  group: "pages"
  cancel-in-progress: true




jobs:
  refresh:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger GitHub pages rebuild
        run: |
          curl --fail --request POST \
            --url https://api.github.com/repos/${{ github.repository }}/pages/builds \
            --header "Authorization: Bearer $USER_TOKEN"
        env:
          # You must create a personal token with repo access as GitHub does
          # not yet support server-to-server page builds.
          USER_TOKEN: ${{ secrets.USER_TOKEN }}
